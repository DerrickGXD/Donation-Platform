{% extends "base-layout.html" %}

{% load static %}

{% load custom_filters %}

{% block page_title %}团体信息{% endblock %}

{% block page_main %}
<div class="container-wrap">
    <div id="fh5co-events">
        <div class="row animate-box">
            <div class="col-md-6 col-md-offset-3 text-center fh5co-heading" style="margin-bottom: 50px;">
                <h2>募捐信息列表-爱心团体</h2>
            </div>
        </div>

    </div>
    <div class="unit-box teams">

    </div>

    <script src="{% static 'js/jquery.min.js' %}" type="text/javascript"></script>
    <script>

        

        var BaseApi = "http://127.0.0.1:8989/api/"
        function get_teams() {
            var unit_box = $(".teams")
            var html = ""

            $.get(BaseApi + "teams", function (data, status) {
                if (status === 'success') {
                    for (var i of data.results) {
                        html += `        <div class="unit">
					<ul style="list-style: none; font-size:18px; color: rgb(75, 75, 75)">
						<li>
							<p>${i.name}</p>
						</li>
		
						<li>
							<p>地址：${i.address}</p>
						</li>`

                        for (var contact of i.contacts) {
                            html += `
						<li>
							<p>联系人：${contact.name}</p>
							<p>联系电话：${contact.phone}</p>
		
						</li>
						`
                        }
                        html += `
					<li>
							<p>发布日期：${i.add_time}</p>
						</li>
						<li>
						${i.verified ? '<p style="color: green">已核实</p>' : '<p style="color: red">未核实</p>'}
						</li>
					</ul>
				</div>
					`

                    }


                    unit_box.html(html)


                } else {
                    alert('获取数据失败！')
                }
            });
        }
        get_teams()

    </script>
</div>
{% endblock %}